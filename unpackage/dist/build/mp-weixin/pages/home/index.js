"use strict";const e=require("../../common/vendor.js"),n=require("../../api/api.js"),i=require("../../enum/user.js"),s=require("../../utils/positioning.js"),t=require("../../utils/wx.js");require("../../utils/http.js");const o={__name:"index",setup(o){const a=new n.Api,{getAround:r}=s.usePositioning();e.ref(),e.ref(!1);const u=e.ref(0);e.index.getMenuButtonBoundingClientRect();const g=e.ref(t.getStorage(i.USER_INFO)),d=r((async n=>{const{address:i,latitude:s,longitude:o,name:r}=n,u=await a.locationCreateRecord({address:i,latitude:s,longitude:o,name:r});t.toast(u.message),200===u.code&&e.index.navigateTo({url:"/pages/record-success/index"})})),l=()=>{e.index.navigateTo({url:"/pages/setting/index"})},c=()=>{e.index.navigateTo({url:"/pages/mine/index"})},x=()=>{e.index.navigateTo({url:"/pages/friends/index"})},p=()=>{e.index.navigateTo({url:"/pages/invite/index"})},v=()=>{e.index.navigateTo({url:"/pages/ranking/index"})};return g&&g.value&&g.value.user_id?(console.log("已经登录"),(()=>{const n=e.index.getSystemInfoSync();u.value=n.statusBarHeight+44})(),e.index.getLocation({type:"wgs84",success:async e=>{console.log("获取用户位置信息成功:",e)},fail:e=>{console.log("获取用户位置信息失败:",e)}})):(console.log("未登录"),e.index.navigateTo({url:"/pages/login/index"})),(n,i)=>({a:e.o(c),b:e.o(l),c:e.o(x),d:e.o(((...n)=>e.unref(d)&&e.unref(d)(...n))),e:e.o(p),f:e.o(v),g:(u.value||90)+"px"})}};wx.createPage(o);
