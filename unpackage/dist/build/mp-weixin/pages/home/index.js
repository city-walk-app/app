"use strict";const e=require("../../common/vendor.js"),n=require("../../api/api.js"),i=require("../../enum/user.js"),o=require("../../utils/positioning.js"),t=require("../../utils/wx.js"),s=require("../../utils/clipboard.js");require("../../utils/http.js");const a={__name:"index",setup(a){const r=new n.Api,{getAround:u}=o.usePositioning();e.ref(),e.ref(!1);const g=e.ref(0);e.index.getMenuButtonBoundingClientRect();const d=e.ref(t.getStorage(i.USER_INFO)),l=u((async n=>{const{address:i,latitude:o,longitude:s,name:a}=n,u=await r.locationCreateRecord({latitude:o,longitude:s});t.toast(u.message),200===u.code&&e.index.navigateTo({url:"/pages/record-success/index"})})),c=()=>{e.index.navigateTo({url:"/pages/setting/index"})},x=()=>{e.index.navigateTo({url:"/pages/mine/index"})},p=()=>{e.index.navigateTo({url:"/pages/friends/index"})},v=()=>{e.index.navigateTo({url:"/pages/invite/index"})},f=()=>{e.index.navigateTo({url:"/pages/ranking/index"})};return e.onShow((()=>{(async()=>{const e=s.getClipboardText();console.log(e)})()})),d&&d.value&&d.value.user_id?(console.log("已经登录"),(()=>{const n=e.index.getSystemInfoSync();g.value=n.statusBarHeight+44})(),e.index.getLocation({type:"wgs84",success:async e=>{console.log("获取用户位置信息成功:",e)},fail:e=>{console.log("获取用户位置信息失败:",e)}})):(console.log("未登录"),e.index.navigateTo({url:"/pages/login/index"})),(n,i)=>({a:e.o(x),b:e.o(c),c:e.o(p),d:e.o(((...n)=>e.unref(l)&&e.unref(l)(...n))),e:e.o(v),f:e.o(f),g:(g.value||90)+"px"})}};wx.createPage(a);
