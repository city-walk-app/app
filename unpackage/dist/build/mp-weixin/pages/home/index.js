"use strict";const e=require("../../common/vendor.js"),t=require("../../api/api.js"),n=require("../../enum/user.js"),s=require("../../utils/positioning.js"),o=require("../../utils/wx.js");require("../../utils/http.js");const i={__name:"index",setup(i){const a=new t.Api,{getAround:r}=s.usePositioning();e.ref(o.getStorage(n.USER_PROVINCE_CODE)),e.ref(),e.ref();const u=e.ref(),c=e.ref(!1),g=e.ref(0);e.index.getMenuButtonBoundingClientRect();const d=e.ref(o.getStorage(n.USER_INFO));r((async e=>{const{address:t,latitude:n,longitude:s,name:i}=e,r=await a.createPositionRecord({address:t,latitude:n,longitude:s,name:i});o.toast(r.message),200===r.code&&(r.data.new_province&&(c.value=!0,u.value=r.data.new_province),l())}));const l=()=>{e.index.getLocation({type:"wgs84",success:async e=>{console.log("获取用户位置信息成功:",e)},fail:e=>{console.log("获取用户位置信息失败:",e)}})},p=()=>{e.index.navigateTo({url:"/pages/setting/index"})};return console.log(d),d.value&&d.value.user_id&&((()=>{const t=e.index.getSystemInfoSync();g.value=t.statusBarHeight+44})(),l()),(t,n)=>({a:e.o(p),b:(g.value||90)+"px"})}};wx.createPage(i);
