"use strict";const e=require("../../common/vendor.js"),t=require("../../utils/http.js"),a=require("../../utils/wx.js"),i=require("../../enum/user.js"),r=require("../../api/api.js");Math||e.unref(u)();const u=()=>"../../components/sheet/index.js",n={__name:"index",setup(u){const n=new r.Api,l=e.ref([{key:"avatar",active:!1,title:"头像"},{key:"nick_name",active:!1,title:"名字"},{key:["province","city"],active:!1,title:"位置"},{key:"birthday",active:!1,title:"生日"},{key:"signature",active:!1,title:"签名"},{key:"email",active:!1,title:"邮箱"},{key:"mobel",active:!1,title:"手机"}]),s=e.ref(),c=e.ref(a.getStorage(i.USER_INFO));(async()=>{if(s.value&&s.value.user_id)return;const e=await n.getUserInfo({user_id:c.value.user_id});200===e.code&&(s.value=e.data)})();const v=()=>{e.index.showModal({title:"退出登录",content:"确定退出登录吗？",showCancel:!0,success:t=>{t.confirm&&(e.index.clearStorage(),e.index.navigateTo({url:"/pages/home/index"}))}})},o=e.ref(!1),y=()=>{o.value=!1};return(a,i)=>e.e({a:s.value},s.value?{b:e.o((e=>o.value=!0)),c:e.f(l.value,((a,i,r)=>e.e({a:e.t(a.title),b:"avatar"===a.key},"avatar"===a.key?{c:e.unref(t.VUE_APP_API_URL)+s.value.avatar}:Array.isArray(a.key)?{e:e.t(s.value.province||""),f:e.t(s.value.city||"")}:{g:e.t(s.value[a.key]||"未设置")},{d:Array.isArray(a.key),h:i,i:`blur(${a.active?0:45}px)`,j:e.o((e=>(e=>{const t=l.value;t.find((t=>t.key===e.key)).active=!0,l.value=t})(a)),i)}))),d:e.o(v)}:{},{e:e.o(y),f:e.p({visible:o.value})})}};wx.createPage(n);
