"use strict";const e=require("../../common/vendor.js"),a=require("../../api/api.js"),t=require("../../utils/http.js");require("../../utils/wx.js");const u=require("../../utils/date.js");require("../../enum/user.js");const n={__name:"index",setup(n){const l=new a.Api,r=e.ref(),i=e.ref(),v=e.ref(),c=e.ref(),o=e.ref(),s=e.ref(),d=()=>{e.index.navigateBack({delta:1})};return e.onLoad((e=>{c.value=e.user_id,(async()=>{const e=await l.getUserInfo({user_id:c.value});200===e.code&&(r.value=e.data)})(),(async()=>{const e=await l.getUserRouteList({user_id:c.value});200===e.code&&(v.value=e.data)})(),(async()=>{const e=await l.getUserProvinceJigsaw({user_id:c.value});200===e.code&&(i.value=e.data)})()})),e.onShow((()=>{(async()=>{const e=await l.getLocationUserHeatmap({date:u.getCurrentDateFormatted()});200===e.code&&e.data&&e.data.length&&(o.value=e.data.map((e=>({...e,_active:!1}))))})()})),(a,n)=>e.e({a:e.o(d),b:r.value},r.value?e.e({c:r.value.nick_name},r.value.nick_name?{d:e.t(r.value.nick_name)}:{},{e:r.value.signature},r.value.signature?{f:e.t(r.value.signature)}:{}):{},{g:i.value&&i.value.length},i.value&&i.value.length?{h:e.f(i.value,((a,u,n)=>({a:`${e.unref(t.VUE_APP_API_URL)}/images/province/${a.province_code}.png`,b:u})))}:{},{i:o.value&&o.value.length},o.value&&o.value.length?{j:e.f(o.value,((a,t,u)=>({a:e.n({"heatmap-body-right-item-active":a._active}),b:a.heatmap_color?a.heatmap_color:"none",c:t,d:e.o((e=>(e=>{e._active=!e._active,console.log(e),e._active?s.value=e.routes:s.value=[]})(a)),t)})))}:{},{k:s.value&&s.value.length},s.value&&s.value.length?{l:e.f(s.value,((a,t,u)=>({a:e.t(a.create_at),b:e.t(a.address||a.city),c:t})))}:{},{m:v.value&&v.value.length},v.value&&v.value.length?{n:e.f(v.value,((a,t,n)=>({a:e.t(a.count),b:e.t(e.unref(u.getCurrentDateFormatted)(a.create_at)),c:t,d:e.o((t=>{return u=a.list_id,void e.index.navigateTo({url:`/pages/route-detail/index?list_id=${u}`});var u}),t)})))}:{})}},l=e._export_sfc(n,[["__scopeId","data-v-2c60beb9"]]);wx.createPage(l);
