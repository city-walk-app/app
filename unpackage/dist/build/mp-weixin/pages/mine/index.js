"use strict";const e=require("../../common/vendor.js"),a=require("../../common/assets.js"),t=require("../../api/api.js"),u=require("../../utils/http.js");require("../../utils/wx.js");const n=require("../../utils/date.js");require("../../enum/user.js");const r={__name:"index",setup(r){const l=new t.Api,i=e.ref(),s=e.ref(),v=e.ref(),o=e.ref(),c=e.ref(),d=e.ref(),_=()=>{e.index.navigateBack({delta:1})};return e.onLoad((e=>{o.value=e.user_id,(async()=>{const e=await l.getUserInfo({user_id:o.value});200===e.code&&(i.value=e.data)})(),(async()=>{const e=await l.getUserRouteList({user_id:o.value});200===e.code&&(v.value=e.data)})(),(async()=>{const e=await l.getUserProvinceJigsaw({user_id:o.value});200===e.code&&(s.value=e.data)})()})),e.onShow((()=>{(async()=>{const e=await l.getLocationUserHeatmap({date:n.getCurrentDateFormatted()});200===e.code&&e.data&&e.data.length&&(c.value=e.data.map((e=>({...e,_active:!1}))))})()})),(t,r)=>e.e({a:a._imports_0$1,b:e.o(_),c:i.value},i.value?e.e({d:i.value.nick_name},i.value.nick_name?{e:e.t(i.value.nick_name)}:{},{f:i.value.signature},i.value.signature?{g:e.t(i.value.signature)}:{}):{},{h:s.value&&s.value.length},s.value&&s.value.length?{i:e.f(s.value,((a,t,n)=>({a:`${e.unref(u.VUE_APP_API_URL)}/images/province/${a.province_code}.png`,b:t})))}:{},{j:c.value&&c.value.length},c.value&&c.value.length?{k:e.f(c.value,((a,t,u)=>({a:e.n({"heatmap-body-right-item-active":a._active}),b:a.heatmap_color?a.heatmap_color:"none",c:t,d:e.o((e=>(e=>{e._active=!e._active,console.log(e),e._active?d.value=e.routes:d.value=[]})(a)),t)})))}:{},{l:d.value&&d.value.length},d.value&&d.value.length?{m:e.f(d.value,((a,t,u)=>({a:e.t(a.create_at),b:e.t(a.address||a.city),c:t})))}:{},{n:v.value&&v.value.length},v.value&&v.value.length?{o:e.f(v.value,((a,t,u)=>({a:e.t(a.count),b:e.t(e.unref(n.getCurrentDateFormatted)(a.create_at)),c:t,d:e.o((t=>{return u=a.list_id,void e.index.navigateTo({url:`/pages/route-detail/index?list_id=${u}`});var u}),t)})))}:{})}},l=e._export_sfc(r,[["__scopeId","data-v-e9cee6cf"]]);wx.createPage(l);
